const DEFAULT_AVATAR="https://i.postimg.cc/KvF0rh0Q/custom-default-avatar.png";async function loadAuthenticatedUser(){const t=localStorage.getItem("token");if(t)try{const e=await fetch("/api/users/me",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)return;const o=await e.json(),a=document.getElementById("navUserAvatar");a&&(a.src=o.profilePhoto?.trim()?o.profilePhoto:DEFAULT_AVATAR),window.currentUser=o}catch(t){console.warn("Failed to load auth user:",t)}}document.addEventListener("DOMContentLoaded",loadAuthenticatedUser);