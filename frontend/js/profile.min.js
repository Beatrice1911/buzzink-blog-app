async function fetchUserProfile(e){try{const e=await fetch(`${API_URI}/users/${username}`);if(!e.ok)throw new Error("User not found");const t=await e.json();document.getElementById("profile-name").textContent=t.name,document.getElementById("profile-bio").textContent=t.bio||"This user has no bio.",document.getElementById("profile-date").textContent=`Joined: ${new Date(t.createdAt).toDateString()}`;const o="https://i.postimg.cc/KvF0rh0Q/custom-default-avatar.png",n=t.profilePhoto?t.profilePhoto:o;document.getElementById("profile-photo").src=n,document.getElementById("user-name-label").textContent=t.name;const s=await fetch(`${API_URI}/posts?authorId=${t._id}`);if(!s.ok)throw new Error("Failed to fetch user's posts");const{posts:r}=await s.json(),a=document.getElementById("posts-list");a.innerHTML=r.length?r.map(e=>`\n            <div class="post-card">\n                <h3>${e.title}</h3>\n                <p>${e.content.substring(0,120)+"..."}</p>\n            </div>\n            `).join(""):"<p class='no-posts'>No posts available.</p>";const c=document.querySelectorAll(".post-card");c.forEach(e=>{e.addEventListener("click",()=>{window.location.href=`post.html?slug=${p.slug}`})})}catch(e){document.body.innerHTML=`<p>${e.message}</p>`}}const API_URI="/api",urlParams=new URLSearchParams(window.location.search),username=urlParams.get("user");username?fetchUserProfile(username):document.body.innerHTML="<h2>User not specified</h2>";