const API_URI="/api",urlParams=new URLSearchParams(window.location.search),userId=urlParams.get("id");async function fetchUserProfile(t){try{const e=await fetch(`/api/users/${t}`);if(!e.ok)throw new Error("User not found");const o=await e.json();document.getElementById("profile-name").textContent=o.name,document.getElementById("profile-bio").textContent=o.bio||"This user has no bio.",document.getElementById("profile-date").textContent=`Joined: ${new Date(o.createdAt).toDateString()}`;const n="https://i.postimg.cc/KvF0rh0Q/custom-default-avatar.png",s=o.profilePhoto?.trim()||n;document.getElementById("profile-photo").src=s,document.getElementById("user-name-label").textContent=o.name;const a=await fetch(`/api/posts?authorId=${o._id}&limit=1000`);if(!a.ok)throw new Error("Failed to fetch user's posts");const{posts:r}=await a.json();document.getElementById("posts-list").innerHTML=r.length?r.map(t=>`\n            <div class="post-card" data-slug="${t.slug}">\n                <h3>${t.title}</h3>\n                <p>${t.content.substring(0,120)+"..."}</p>\n            </div>\n            `).join(""):"<p class='no-posts'>No posts available.</p>";document.querySelectorAll(".post-card").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.slug;window.location.href=`post.html?slug=${e}`})})}catch(t){document.body.innerHTML=`<p>${t.message}</p>`}}userId?fetchUserProfile(userId):document.body.innerHTML="<h2>User not specified</h2>";