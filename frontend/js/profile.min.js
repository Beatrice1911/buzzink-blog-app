async function fetchUserProfile(t){try{const t=await fetch(`${API_URI}/users/${username}`);if(!t.ok)throw new Error("User not found");const e=await t.json();document.getElementById("profile-name").textContent=e.name,document.getElementById("profile-bio").textContent=e.bio||"This user has no bio.",document.getElementById("profile-date").textContent=`Joined: ${new Date(e.createdAt).toDateString()}`;const o=e.profilePhoto?e.profilePhoto.startsWith("http")?e.profilePhoto:`${API_BASE}${e.profilePhoto}`:"https://i.postimg.cc/KvF0rh0Q/custom-default-avatar.png";document.getElementById("profile-photo").src=o,document.getElementById("user-name-label").textContent=e.name;const n=await fetch(`${API_URI}/posts?authorId=${e._id}`);if(!n.ok)throw new Error("Failed to fetch user's posts");const{posts:s}=await n.json(),a=document.getElementById("posts-list");a.innerHTML=s.length?s.map(t=>`\n            <div class="post-card" onclick="window.location.href='post.html?id=${t._id}'">\n                <h3>${t.title}</h3>\n                <p>${t.content.substring(0,120)+"..."}</p>\n            </div>\n            `).join(""):"<p class='no-posts'>No posts available.</p>"}catch(t){document.body.innerHTML=`<p>${t.message}</p>`}}const isLocalhost="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,API_BASE=isLocalhost?"http://localhost:5000":"",API_URI=`${API_BASE}/api`,urlParams=new URLSearchParams(window.location.search),username=urlParams.get("user");username?fetchUserProfile(username):document.body.innerHTML="<h2>User not specified</h2>";